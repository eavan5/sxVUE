{"version":3,"file":"vue.js","sources":["../src/util.js","../global-api/index.js","../src/compiler/generate.js","../src/compiler/parse.js","../src/compiler/index.js","../src/observer/dep.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/index.js"],"sourcesContent":["export function proxy(vm, data, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[data][key]\n    },\n    set(newValue) {\n      vm[data][key] = newValue\n    }\n  })\n}\n\nexport const LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed'\n]\n\nconst strategies = {}\nstrategies.data = function (parentVal, childVal) {\n  return childVal //这里应该有合并data的策略\n}\n// strategies.computed = function () {\n\n// }\n// strategies.watch = function () {\n\n// }\nfunction mergeHook(parentValue, childValue) {  // 声明周期的合并\n  if (childValue) {\n    if (parentValue) {\n      return parentValue.concat(childValue); // 爸爸和儿子进行拼接\n    } else {\n      return [childValue] // 儿子需要转换成数组\n    }\n  } else {\n    return parentValue //如果没儿子不合并了 采用父亲的\n  }\n}\nLIFECYCLE_HOOKS.forEach(hook => {\n  strategies[hook] = mergeHook\n})\n\nexport function mergeOptions(parent, child) {\n  // console.log(parent);\n  //遍历父亲,可能是父亲有 儿子没有\n  const options = {}\n  for (const key in parent) {  //父亲和儿子都有在这就全部处理了\n    mergeField(key)\n  }\n  // console.log('======');\n  // console.log(options);\n  // 儿子有父亲没有\n  for (const key in child) {\n    if (!parent.hasOwnProperty(key)) {\n      // const element = child[key];\n      mergeField(key)\n\n\n    }\n  }\n  // console.log('======');\n  // console.log(options);\n\n  function mergeField(key) { //合并字段\n    //根据key 不同的策略来合并\n    if (strategies[key]) {\n      options[key] = strategies[key](parent[key], child[key])\n    } else {\n      // 默认合并\n      options[key] = child[key]\n    }\n  }\n  return options\n}\nlet callbacks = []\nfunction flushCallbacks() {\n  while (callbacks.length) { // 让nextTrick中传入的方法依次执行\n    let cb = callbacks.pop()\n    cb()\n  }\n  pending = false\n  callbacks = []\n}\nlet timerFunc;\nif (Promise) {\n  timerFunc = () => {\n    Promise.resolve().then(flushCallbacks) // 异步处理更新\n  }\n} else if (MutationObserver) { // 可以监控dom的变化,监控完毕之后是异步更新,是一个微任务\n  let observe = new MutationObserver(flushCallbacks)\n  let textNode = document.createTextNode(1) // 先创建一个文本节点\n  observe.observe(textNode, { characterData: true }) //观测节点的内容\n  timerFunc = () => {\n    text.textContent = 2  // 文本中的内容改成2\n  }\n} else if (serImmediate) { // IE中的一个API\n\n}\nlet pending = false\nexport function nextTrick(cb) {  // 因为内部会调用nextTrick 用户也会调用 但是异步只需要一次\n  callbacks.push(cb)\n  if (!pending) {\n    // vue3里面的nextTrick原理就是promise.then 没有做兼容性处理\n    timerFunc() //这个方法就是异步方法  做了兼容处理了\n    // Promise.resolve().then()\n    pending = true\n  }\n}","import { mergeOptions } from \"../src/util\";\n\nexport function initGlobalApi(Vue) {\n  Vue.options = {}  //Vue.component Vue.directive\n  Vue.mixin = function (mixin) {\n\n    //先只考虑生命周期\n    this.options = mergeOptions(this.options, mixin) //合并options\n    // console.log(this.options, '---options----');\n  }\n  // 用户new Vue({created()}{})\n}","// 编写的代码  <div id='app' style=\"color:red\"> hello {{name}} <span>hello</span></div>\n// 逾期结果: render(){\n//   return _c('div',{id:'app',style:{color:'red'}},_v('hello'+_s(name)),_c('span',null,_v(\"hello\")))\n// }\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g  //匹配html里面的模板的\n\n// 语法层面的转译\nfunction genProps(attrs) {\n  let str = ''\n  for (let i = 0; i < attrs.length; i++) {\n    const attr = attrs[i];\n    if (attr.name === 'style') {\n      let obj = {} //对样式进行特殊处理\n      attr.value.split(',').forEach(item => {\n        let [key, value] = item.split(\":\")\n        obj[key] = value\n        attr.value = obj\n      })\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\n\n\n  }\n  return `{${str.slice(0, -1)}}`\n}\n\nfunction gen(node) {\n  if (node.type === 1) { //生成元素节点的字符串\n    return generate(node)\n  } else {\n    let text = node.text\n    // 如果是普通文本 (不带{{}}的)\n\n    if (!defaultTagRE.test(text)) {\n      return `_v(${JSON.stringify(text)})`  // _v(\"hello{{name}}\") => _v('hello'+_v(name))\n    }\n    // 如果是<div>hello{{aaa}} world {{bbb}}</div>\n    let tokens = []  //存放 每一段代码\n    let lastIndex = defaultTagRE.lastIndex = 0 //如果正则是全局模式 需要每次使用前 置为零\n    let match, index  //每次匹配到的结果\n    while (match = defaultTagRE.exec(text)) {\n      index = match.index //保存匹配到的索引\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n      }\n      tokens.push(`_s(${match[1].trim()})`)\n      lastIndex = index + match[0].length\n    }\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)))\n    }\n    return `_v(${tokens.join('+')})`\n  }\n}\n\n\nfunction getChildren(el) {\n  const children = el.children\n  if (children) { // 将所有转换后的儿子用逗号拼接起来\n    return children.map(child => gen(child)).join(',')\n  }\n}\n\nexport function generate(el) {\n  let children = getChildren(el) //儿子生成\n  let code = `_c('${el.tag}',${el.attrs.length ? `${genProps(el.attrs)}` : \"undefined\"}${children ? `,${children}` : ''})`\n  return code\n}\n\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; //匹配标签名字  //ps:里面的\\\\ 是在字符串定义正则的时候需要转义\n//  ?: 匹配不捕获\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;  // <my:xx>  \nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\n\nexport function parseHTML(html) {\n  function createASTElement(tagName, attrs) {\n    return {\n      tag: tagName, //标签名\n      type: 1, // 元素类型\n      children: [], //子列表\n      attrs, //属性\n      parent: null //父节点\n    }\n\n  }\n  let root,\n    currentParent,\n    stack = []\n\n  //标签是否符合预期\n  function start(tagName, attrs) {\n    let element = createASTElement(tagName, attrs)\n    if (!root) {\n      root = element\n    }\n    currentParent = element // 当前解析的标签 保存起来\n    stack.push(element) //将生成的AST元素放到栈里面\n    // console.log(tagName, attrs, '---开始标签---');\n  }\n  function end(tagName) { //在结尾标签处,保存父子关系\n    let element = stack.pop()\n    // console.log(tagName, '---结束标签---');\n    currentParent = stack[stack.length - 1] // 因为出栈了 所以当前标签是之前的一个标签\n    if (currentParent) { // 当闭合的时候可以知道这个标签的父节点是谁\n      element.parent = currentParent\n      currentParent.children.push(element)\n    }\n  }\n\n  function chars(text) {\n    text = text.replace(/\\s/g, '') //去除空行\n    if (text) {\n      currentParent.children.push({\n        type: 3,\n        text\n      })\n    }\n    // console.log(text, '---文本---');\n  }\n\n\n  while (html) { //只要html不为空 则一直解析\n    let textEnd = html.indexOf('<')\n    if (textEnd == 0) {\n      //是标签\n      const startTagMatch = parseStartTag() //<xxx>开始标签匹配的结果\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n      const endTagMatch = html.match(endTag) //</ xxx>结束标签匹配\n      if (endTagMatch) {\n        advance(endTagMatch[0].length)\n        end(endTagMatch[1]) //将结束标签传入\n        continue\n      }\n    }\n    let text\n    if (textEnd > 0) { //是文本\n      text = html.substring(0, textEnd)\n    }\n\n    if (text) {\n      advance(text.length)\n      chars(text)\n    }\n    // break\n\n  }\n  //匹配到之后将html更新\n  function advance(n) {\n    html = html.substring(n)\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    // console.log(start);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length) //删除开始标签\n      //如果直接是闭合标签 说明没有属性\n      let end, attr\n      //不是结尾标签,并且能匹配到属性\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })\n        advance(attr[0].length)\n        continue;\n      }\n      //去除 结尾的>\n      if (end) {\n        // debugger\n        advance(end[0].length)\n      }\n      // console.log('match', match);\n      return match\n    }\n  }\n  return root\n}","import { generate } from './generate';\nimport { parseHTML } from './parse'\n\n\nexport function compileToFunctions(template) {\n  //html模板 => render函数\n  //1.将html代码转换成AST语法树(可以用AST数去描述语言本身) \n  //ps:虚拟dom(虚拟dom是用对象来描述节点的)\n  let ast = parseHTML(template)\n  // console.log(ast);\n  //2.优化静态节点\n\n  // 3.通过这颗树  重新生成代码\n  let code = generate(ast)\n  // console.log(code);\n  //4.将字符串转换成render函数  限制取值范围 通过with来进行取值  稍后我们调用render函数就可以通过改变this 让这个函数内部取到成果了\n  let render = new Function(`with(this){return ${code}}`)\n  // console.log(render);\n  return render\n}\n\n","let id = 0\nclass Dep {\n  constructor() {\n    this.subs = []\n    this.id = id++\n  }\n  depend() {\n    // 我们希望这个watcher 也可以放dep (比如计算属性)\n    Dep.target.addDep(this) //让dep记住watcher的同时让watcher记住dep\n    // this.subs.push(Dep.target)\n  }\n  addSub(watcher) {\n    this.subs.push(watcher)\n  }\n  notify() {\n    this.subs.forEach(watcher => watcher.update())\n  }\n}\n\nDep.target = null\nexport function pushTarget(watcher) {\n  Dep.target = watcher //保留watcher\n}\nexport function popTarget(watcher) {\n  Dep.target = null  //将变量删除\n}\n\nexport default Dep\n\n//多对多的关系  一个属性有一个dep(是用来手机watcher的)\n// dep可以存多个watcher  vm.$watcher('name')\n// 一个watcher可以对应多个dep","import { nextTrick } from \"../util\";\nimport { popTarget, pushTarget } from \"./dep\";\n\nlet id = 0\nclass Watcher {\n  //exprOrFn vm._update(vm._render())\n  constructor(vm, exprOrFn, cb, options) {\n    this.vm = vm;\n    this.exprOrFn = exprOrFn;\n    this.cb = cb;\n    this.user = options.user; //这是一个用户操作的watcher\n    this.isWatcher = typeof options === 'boolean' //是初始化渲染watcher\n    this.options = options;\n    this.id = id++ //watcher的唯一标识\n    this.deps = [] //记录多个dep依赖\n    this.depsId = new Set\n    if (typeof exprOrFn === 'function') {\n      this.getter = exprOrFn\n    } else {\n      this.getter = function () { // exprOrFn 传递过来的可能是一个字符串a\n        //当去当前实例上取值的时候 才会触发依赖收集\n        let path = exprOrFn.split('.') // ['a','a','a']\n        let obj = vm\n        for (let i = 0; i < path.length; i++) {\n          obj = obj[path[i]];\n        }\n        return obj\n      }\n    }\n    //默认会先调用一次get 进行取值 将结果保留下来\n    this.value = this.get()  //默认调用\n  }\n  addDep(dep) {\n    let id = dep.id\n    if (!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep)\n      dep.addSub(this)\n    }\n    //dep去重\n  }\n  get() {\n    // console.warn('获取值');\n    // Dep.target = watcher\n    pushTarget(this) //当前watcher的实例\n    let result = this.getter() //调用exprOrFn  渲染页面 取值(执行了get方法)  调用render方法  with(vm){_v(msg)}\n    popTarget()\n    return result\n  }\n  run() {\n    let newValue = this.get() //渲染逻辑\n    let oldValue = this.value\n    if (this.user) {\n      this.cb.call(this.vm, newValue, oldValue)\n    }\n  }\n  update() {\n    //这里不要每次都调用get方法  get方法会重新渲染页面\n    queueWatcher(this)\n    // this.get() //重新渲染\n  }\n}\nfunction flushSchedulerQueue() {\n  queue.forEach(watcher => {\n    watcher.run();\n    if (watcher.isWatcher) {\n      watcher.cb()\n    }\n  })\n  queue = []  // 清空watcher队列为了下次使用\n  has = {} //清空标识的id\n  pending = false // 还原pending\n}\n\nlet queue = [] //将需要批量更新的watcher 春发到一个队列中 收好让watcher执行\nlet has = {}\nlet pending = false\nfunction queueWatcher(watcher) {\n  let id = watcher.id  // 对watcher进行去重\n  if (has[id] == null) {\n    queue.push(watcher) // 并且将watcher存到队列中\n    has[id] = true\n  }\n  if (!pending) { //如果没有清空 就不要开定时器呢\n    //等待所有同步代码执行完毕后再执行\n    nextTrick(flushSchedulerQueue)\n    pending = true\n  }\n\n}\n\nexport default Watcher\n\n// 在数据劫持的时候 定义defineProperty的时候 已经给每个属性新增了一个Dep实例\n\n// 1.先把这个渲染watcher 放到了Dep.target属性上\n// 2.开始渲染,取值的时候会调用get方法 需要让这个属性的dep存储当前的watcher\n// 3.页面上所需要的属性都会将这个watcher存在自己的dep中\n// 4.等待属性更新了调用set方法 就重新调用渲染逻辑 通知自己存储的watcher来更新\n","export function patch(oldVnode, vnode) {\n  // oldVnode => id#app vnode => 我们根据模板产生的虚拟dom\n\n  //将虚拟节点转换成真实节点\n  // console.log(oldVnode, vnode);\n  let el = createElm(vnode) //产生真实的dom\n  let parentElm = oldVnode.parentNode //获取老的app的父亲 => body\n  parentElm.insertBefore(el, oldVnode.nextSibling)  //当前的真实元素插入到app的后面\n  parentElm.removeChild((oldVnode)) //删除老的节点\n\n  return el\n}\n\nfunction createElm(vnode) {\n  let { tag, children, key, data, text } = vnode\n  if (typeof tag === 'string') { //创建元素 放到vnode.el上\n    vnode.el = document.createElement(tag)\n\n    // 只有元素才有属性\n    updateProperties(vnode)\n\n\n    children.forEach(child => {  //遍历儿子  将儿子渲染后的结果扔到父亲中\n      vnode.el.appendChild(createElm(child))\n    })\n  } else { // 创建文本 放到vnode.el上\n    vnode.el = document.createTextNode(text)\n  }\n  return vnode.el\n}\n\nfunction updateProperties(vnode) {\n  let el = vnode.el\n  let newProps = vnode.data || {}\n  for (const key in newProps) {\n    if (Object.hasOwnProperty.call(newProps, key)) {\n      const element = newProps[key];\n      if (key === 'style') {  // {color:red}\n        for (const key2 in newProps.style) {\n          if (Object.hasOwnProperty.call(newProps.style, key2)) {\n            el.style[key2] = newProps.style[key2]\n          }\n        }\n      } else if (key === 'class') {\n        el.className = el.class\n      } else {\n        el.setAttribute(key, element)\n      }\n\n    }\n  }\n}\n\n\n// vue渲染流程 -> 先初始化数据 -> 将魔棒进行编译 => render函数 -> 生成虚拟节点 -> 生成真实节点 -> 扔到dom上去\n\n\n","import Watcher from \"./observer/watcher\";\nimport { patch } from \"./vdom/patch\";\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this\n\n    //用新的创建的元素 替换掉老的vm.$el\n    vm.$el = patch(vm.$el, vnode)\n  }\n}\n\nexport function mountComponent(vm, el) {\n  vm.$el = el\n  // 调用render方法去渲染el属性\n  callHook(vm, 'beforeMount')\n  //先调用render方法创建虚拟节点 render ,再将虚拟节点渲染到页面上 update\n\n  let updateComponent = () => {\n    vm._update(vm._render())  //渲染和更新逻辑\n  }\n\n  //这个watcher是用于渲染的,目前没有别的功能 调用updateComponent\n  let watcher = new Watcher(vm, updateComponent, () => {\n    callHook(vm, 'updated')\n  }, true)\n  // console.log('watcher', watcher);\n  //要把属性和watcher绑定在一起\n\n  callHook(vm, 'mounted')\n\n}\n\n// callHook(vm,'beforeCreate')\nexport function callHook(vm, hook) {\n  const handlers = vm.$options[hook] // vm.$options.create = [a1,a2,a3]\n  if (handlers) {\n    for (let i = 0; i < handlers.length; i++) {\n      handlers[i].call(vm) //更改生命周期中的this\n\n    }\n  }\n}","// 切片编程\n\n\nlet oldArrayProtoMethods = Array.prototype;\n\n//继承一下\nexport let arrayMethods = Object.create(oldArrayProtoMethods)\n\nlet methods = [\n  'push',\n  'pop',\n  'unshift',\n  'shift',\n  'reverse',\n  'splice',\n  'sort'\n]\nmethods.forEach(method => {\n  arrayMethods[method] = function (...args) {  //这里的this就是observer的data\n    // 当调用数组我们劫持后的这七个方法 页面应该更新\n    // 需要知道数组对应哪个dep\n    console.log('数组方法被调用了');\n    const result = oldArrayProtoMethods[method].apply(this, arguments)\n    let inserted\n    let ob = this.__ob__\n    switch (method) {\n      case 'push':\n      case 'unshift': //这两个内容都是添加,添加的内容可能是对象类型,应该再次进行劫持\n        inserted = args\n        break;\n      case 'splice': //vue.$set原理\n        inserted = args.slice(2) // 第3个就是新增的数据\n      default:\n        break;\n    }\n    //如果当前的inserted有值 则继续检测\n    if (inserted) ob.observeArray(inserted)\n\n    ob.dep.notify() //通知数组去更新\n    return result\n  }\n})\n\n\n\n","import { arrayMethods } from './array'\nimport Dep from './dep'\nclass Observer {\n  constructor(data) {\n    this.dep = new Dep() // value = {}  value = []\n    //使用defineProperty重新定义属性\n    //判断一个对象是否被观察到,则看这个属性有没有__ob__属性\n    Object.defineProperty(data, '__ob__', {\n      enumerable: false, //不能被枚举,不能被循环出来\n      configurable: false, // 不能修改赋值\n      value: this\n    })\n    if (Array.isArray(data)) {\n      Object.setPrototypeOf(data, arrayMethods)\n      //观测数组中的对象类型,对象变化也需要做一些事\n      this.observeArray(data)\n    } else {\n      //使用defineProperty 重新定义属性\n      this.walk(data)\n    }\n  }\n  observeArray(data) {\n    data.forEach(item => {\n      observe(item)\n    })\n  }\n  walk(data) {\n    let keys = Object.keys(data)\n    keys.forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  //获取到数组对应的dep\n  let childDep = observe(value) // 递归下去\n\n  let dep = new Dep()  //每个属性都有一个dep\n\n  //当页面取值的时候 说明这个值用来渲染了,将这个watcher和这个属性对应起来\n  Object.defineProperty(data, key, {\n    get() { //依赖收集\n      if (Dep.target) {  //让这个属性记住这个watcher\n        dep.depend()\n        if (childDep) { // 可能是数组也可能是对象\n          // 默认给数组增加了一个dep属性,当对这个数组对象取值的时候\n          childDep.dep.depend() //将数组的对应的依赖watcher存起来了\n        }\n      }\n      return value\n    },\n    set(newValue) {  //依赖更新\n      if (newValue === value) return\n      observe(newValue)  //如果用户设置的值还是一个对象,继续观测\n      value = newValue\n\n      dep.notify() //重新渲染\n    }\n  })\n\n}\n\nexport function observe(data) {\n  // Object.defineProperty实际上也是可以对数组进行监控的，但是由于监控数组会去递归数组，会造成性能问题，所以改用数组原型重写的方法\n\n\n  // 如果不是对象或函数直接return\n  if (typeof data !== 'object' || data === null) return\n  //如果已经被监听,则return\n  if (data.__ob__) return data\n  return new Observer(data)\n\n  // 只观测存在的属性 \n  // 数组中更改索引和长度 无法被监控\n  // $set 数组实际上就是 splice\n  // $set 对象实际上就是 Object.defineProperty\n\n\n}","\nimport { observe } from './observer/index'\nimport Watcher from './observer/watcher';\nimport { nextTrick, proxy } from './util'\nexport function initState(vm) {\n  const options = vm.$options;\n  if (options.props) {\n    initProps(vm)\n  }\n  if (options.methods) {\n    initMethods(vm)\n  }\n  if (options.data) {\n    initData(vm)\n  }\n  if (options.computed) {\n    initComputed(vm)\n  }\n  if (options.watch) {\n    initWatch(vm)\n  }\n}\n\nfunction initProps() {\n\n}\n\nfunction initMethods() {\n\n}\n\n\nfunction initData(vm) {\n  let data = vm.$options.data\n  // 判断data是否是函数,兼容函数或者对象\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data\n  //数据的劫持方案  对象Object.defineProperty\n  //数组 单独处理的\n\n  //当我从vm上取属性时,帮我吧属性上的取值代理到vm._data上\n  for (const key in data) {\n    if (Object.hasOwnProperty.call(data, key)) {\n      proxy(vm, \"_data\", key)\n    }\n  }\n\n  observe(data) // 让这个对象重新定义set 和 get\n}\n\nfunction initComputed() {\n\n}\n\nfunction initWatch(vm) {\n  let watch = vm.$options.watch\n  for (const key in watch) {\n    const handler = watch[key] //handler可能是我数组 \n    if (Array.isArray(handler)) {\n      handler.forEach(handler => {\n        createWatcher(vm, key, handler)\n      })\n    } else {\n      createWatcher(vm, key, handler) // handler可能是字符串 对象 函数\n    }\n  }\n  // debugger\n  // console.log('watch', watch);\n}\n\nfunction createWatcher(vm, exprOrFn, handler, options) {  //options可以用来表示 是用户watcher\n  if (typeof handler === 'object') {\n    options = handler\n    handler = handler.handler // 是一个函数\n  }\n  if (typeof handler === 'string') {\n    handler = vm[handler] // 将实例上的方法座位handler\n  }\n\n  // key handler 用户传入的选项\n  return vm.$watch(exprOrFn, handler, options)\n}\n\n\nexport function stateMixin(Vue) {\n  Vue.prototype.$nextTrick = function (cb) {\n    nextTrick(cb)\n  }\n  Vue.prototype.$watch = function (exprOrFn, cb, options) {\n    // console.log(exprOrFn, cb, options);\n    options.user = true; // 标记为用户watcher\n    // 数据应该依赖这个watcher 数据变化后应该让watcher重新执行\n    let watcher = new Watcher(this, exprOrFn, cb, { ...options, user: true })\n    if (options.immediate) { //如果immediate则立即执行\n      cb()\n    }\n  }\n}","import { compileToFunctions } from './compiler/index';\nimport { callHook, mountComponent } from './lifecycle.js';\nimport { initState } from './state'\nimport { mergeOptions } from './util';\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    // 写成 vm.constructor.options 是为了防止子组件的options一起被混合\n    vm.$options = mergeOptions(vm.constructor.options, options);  //需要将用户自定义的options和全局的options做合并\n\n    //初始化之前调用beforeCreate\n    callHook(vm, 'beforeCreate')\n\n\n    //初始化状态\n    initState(vm)\n\n    callHook(vm, 'created')\n\n\n    //初始化事件...\n\n    //如果有el属性 则表示需要渲染模板\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    //挂载操作\n    const vm = this\n    const options = vm.$options\n    el = document.querySelector(el)\n    if (!options.render) {\n      //没有render方法,则将template转换成render方法\n      let template = options.template\n      if (!template && el) {\n        template = el.outerHTML\n      }\n      // 将模板编译成render函数\n      //1.处理模板变成ast语法树 2.标记静态节点 3.重新code生成(return的字符串) 4.通过new Function + with 生成render函数 \n      const render = compileToFunctions(template)\n      options.render = render\n    }\n    //需要挂载这个组件\n    mountComponent(vm, el)\n\n  }\n}","export function renderMixin(Vue) {\n  Vue.prototype._c = function () { //创建虚拟dom元素\n    return createElement(...arguments)\n  }\n\n  //当结果是对象时,会对这个对象取值\n  Vue.prototype._s = function (val) { // stringify\n    return val == null ? '' : (typeof val === 'object') ? JSON.stringify(val) : val\n  }\n  Vue.prototype._v = function (text) { //创建虚拟dom文本元素\n    return createTextVnode(text)\n  }\n  Vue.prototype._render = function () { // _render = render\n    const vm = this;\n    const render = vm.$options.render\n    let vnode = render.call(vm)\n    return vnode\n  }\n}\n\nfunction createElement(tag, data = {}, ...children) {\n  return vnode(tag, data, data.key, children)\n}\nfunction createTextVnode(text) {\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\n//用来产生虚拟dom的,用来操作正式dom消耗性能(真实dom有几百个属性)\nfunction vnode(tag, data, key, children, text) {\n  return {\n    tag,\n    data,\n    key,\n    children,\n    text,\n    // componentsInstances:\n  }\n}","import { initGlobalApi } from '../global-api/index'\nimport { initMixin } from './init'\nimport { lifecycleMixin } from './lifecycle'\nimport { renderMixin } from './vdom/index'\nimport { stateMixin } from './state'\n\n// 用vue的构造函数 创建组件\nfunction Vue(options) {\n  // console.error(options);\n  this._init(options) // 初始化操作\n}\n\n//原型方法\n//Vue初始化方法\ninitMixin(Vue)  // init方法\n//混合生命周期\nlifecycleMixin(Vue) // _update\n//渲染\nrenderMixin(Vue)  // _render\n\nstateMixin(Vue)\n\n// 静态方法  Vue.component Vue.directive Vue.extends Vue.mixin\ninitGlobalApi(Vue)\nexport default Vue"],"names":["proxy","vm","data","key","Object","defineProperty","get","set","newValue","LIFECYCLE_HOOKS","strategies","parentVal","childVal","mergeHook","parentValue","childValue","concat","forEach","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","callbacks","flushCallbacks","length","cb","pop","pending","timerFunc","Promise","resolve","then","MutationObserver","observe","textNode","document","createTextNode","characterData","text","textContent","serImmediate","nextTrick","push","initGlobalApi","Vue","mixin","defaultTagRE","genProps","attrs","str","i","attr","name","obj","value","split","item","JSON","stringify","slice","gen","node","type","generate","test","tokens","lastIndex","match","index","exec","trim","join","getChildren","el","children","map","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tagName","root","currentParent","stack","start","element","end","chars","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","advance","substring","n","compileToFunctions","template","ast","render","Function","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","Watcher","exprOrFn","user","isWatcher","deps","depsId","Set","getter","path","dep","has","add","addSub","result","oldValue","call","queueWatcher","flushSchedulerQueue","queue","run","patch","oldVnode","vnode","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","createElement","updateProperties","appendChild","newProps","key2","style","className","setAttribute","lifecycleMixin","prototype","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","$options","oldArrayProtoMethods","Array","arrayMethods","create","methods","method","args","console","log","apply","arguments","inserted","ob","__ob__","observeArray","notify","Observer","enumerable","configurable","isArray","setPrototypeOf","walk","keys","defineReactive","childDep","depend","initState","props","initData","computed","watch","initWatch","_data","handler","createWatcher","$watch","stateMixin","$nextTrick","immediate","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","_s","val","_v","createTextVnode","undefined"],"mappings":"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"}