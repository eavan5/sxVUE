{"version":3,"file":"vue.js","sources":["../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer {\n  constructor(data) {\n    //使用defineProperty 重新定义属性\n    this.walk(data)\n  }\n  walk(data) {\n    let keys = Reflect.ownKeys(data)\n    console.log(keys);\n    keys.forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  observe(value) // 递归下去\n  Object.defineProperty(data, key, {\n    get() {\n      console.log('获取值');\n      return value\n    },\n    set(newValue) {\n      console.log('设置值');\n      if (newValue === value) return\n      observe(newValue)  //如果用户设置的值还是一个对象,继续观测\n      value = newValue\n    }\n  })\n\n}\n\nexport function observe(data) {\n  // 如果不是对象直接return\n  if (typeof data !== 'object' || data === null) return\n  return new Observer(data)\n}","\nimport {observe} from './observer/index'\nexport function initState(vm) {\n  const options = vm.$options;\n  if (options.props) {\n    initProps(vm)\n  }\n  if (options.methods) {\n    initMethods(vm)\n  }\n  if (options.data) {\n    initData(vm)\n  }\n  if (options.computed) {\n    initComputed(vm)\n  }\n  if (options.watch) {\n    initWatch(vm)\n  }\n}\n\nfunction initProps() {\n\n}\n\nfunction initMethods() {\n\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data\n  // 判断data是否是函数,兼容函数或者对象\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data\n  \n  //数据的劫持方案  对象Object.defineProperty\n  //数组 单独处理的\n  observe(data)\n}\n\nfunction initComputed() {\n\n}\n\nfunction initWatch() {\n\n}","import { initState } from './state'\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n\n    //初始化状态\n    initState(vm)\n\n    //初始化事件...\n  }\n\n}","import { initMixin } from './init'\nfunction Vue(options) {\n  this._init(options) // 初始化操作\n}\n\n//Vue初始化方法\ninitMixin(Vue)\nexport default Vue"],"names":["Observer","data","walk","keys","Reflect","ownKeys","console","log","forEach","key","defineReactive","value","observe","Object","defineProperty","get","set","newValue","initState","vm","options","$options","props","methods","initData","computed","watch","_data","call","initMixin","Vue","prototype","_init"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAAMA;EACJ,oBAAYC,IAAZ,EAAkB;EAAA;;EAChB;EACA,SAAKC,IAAL,CAAUD,IAAV;EACD;;;;aACD,cAAKA,IAAL,EAAW;EACT,UAAIE,IAAI,GAAGC,OAAO,CAACC,OAAR,CAAgBJ,IAAhB,CAAX;EACAK,MAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;EACAA,MAAAA,IAAI,CAACK,OAAL,CAAa,UAAAC,GAAG,EAAI;EAClBC,QAAAA,cAAc,CAACT,IAAD,EAAOQ,GAAP,EAAYR,IAAI,CAACQ,GAAD,CAAhB,CAAd;EACD,OAFD;EAGD;;;;;;EAGH,SAASC,cAAT,CAAwBT,IAAxB,EAA8BQ,GAA9B,EAAmCE,KAAnC,EAA0C;EACxCC,EAAAA,OAAO,CAACD,KAAD,CAAP,CADwC;;EAExCE,EAAAA,MAAM,CAACC,cAAP,CAAsBb,IAAtB,EAA4BQ,GAA5B,EAAiC;EAC/BM,IAAAA,GAD+B,iBACzB;EACJT,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;EACA,aAAOI,KAAP;EACD,KAJ8B;EAK/BK,IAAAA,GAL+B,eAK3BC,QAL2B,EAKjB;EACZX,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;EACA,UAAIU,QAAQ,KAAKN,KAAjB,EAAwB;EACxBC,MAAAA,OAAO,CAACK,QAAD,CAAP,CAHY;;EAIZN,MAAAA,KAAK,GAAGM,QAAR;EACD;EAV8B,GAAjC;EAaD;;EAEM,SAASL,OAAT,CAAiBX,IAAjB,EAAuB;EAC5B;EACA,MAAI,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAAzC,EAA+C;EAC/C,SAAO,IAAID,QAAJ,CAAaC,IAAb,CAAP;EACD;;ECjCM,SAASiB,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,MAAMC,OAAO,GAAGD,EAAE,CAACE,QAAnB;;EACA,MAAID,OAAO,CAACE,KAAZ,EAAmB;;EAGnB,MAAIF,OAAO,CAACG,OAAZ,EAAqB;;EAGrB,MAAIH,OAAO,CAACnB,IAAZ,EAAkB;EAChBuB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACD;;EACD,MAAIC,OAAO,CAACK,QAAZ,EAAsB;;EAGtB,MAAIL,OAAO,CAACM,KAAZ,EAAmB;EAGpB;;EAUD,SAASF,QAAT,CAAkBL,EAAlB,EAAsB;EACpB,MAAIlB,IAAI,GAAGkB,EAAE,CAACE,QAAH,CAAYpB,IAAvB,CADoB;;EAGpBkB,EAAAA,EAAE,CAACQ,KAAH,GAAW1B,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAAC2B,IAAL,CAAUT,EAAV,CAA7B,GAA6ClB,IAA/D,CAHoB;EAMpB;;EACAW,EAAAA,OAAO,CAACX,IAAD,CAAP;EACD;;ECpCM,SAAS4B,SAAT,CAAmBC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUZ,OAAV,EAAmB;EACvC,QAAMD,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcD,OAAd,CAFuC;;EAKvCF,IAAAA,SAAS,CAACC,EAAD,CAAT,CALuC;EAQxC,GARD;EAUD;;ECXD,SAASW,GAAT,CAAaV,OAAb,EAAsB;EACpB,OAAKY,KAAL,CAAWZ,OAAX,EADoB;;EAErB;;;EAGDS,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}